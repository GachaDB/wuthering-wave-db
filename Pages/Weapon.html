<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="StickIn" content="This is the Stick IN Home Page">
    <link rel="stylesheet" href="../CSS/Sidebar.css">
    <title>Weapon</title>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <!-- GSAP Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <!-- Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r146/three.min.js"></script>
  </head>
  <body>
    <nav class="navbar">
      <div class="menu-btn">
        <i class="bx bx-menu"></i>
      </div>
    </nav>
    <nav class="sidebar">
      <header>
        <div class="image-text">
          <a href="your-link-here">
            <span class="image">
              <img src="https://t4.ftcdn.net/jpg/04/06/91/91/240_F_406919147_D3WsGjwXj1qmFNrei2ZFvBWwiueRcFmg.jpg" alt="logo" />
            </span>
          </a>
          <div class="text header-text">
            <span class="main">Wuthering Waves</span>
          </div>
        </div>
        <i class="bx bx-chevron-right toggle"></i>
      </header>
      <div class="menu-bar">
        <div class="menu">
          <li class="nav-link">
            <a href="/">
              <i class="bx bx-home-alt icons"></i>
              <span class="text nav-text">Dashboard</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="Code.html">
              <i class="bx bxs-coupon icons"></i>
              <span class="text nav-text">Coupons/Codes</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="Character.html">
              <i class='bx bx-group icons'></i>
              <span class="text nav-text">Character</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="Weapon.html">
              <i class='bx bx-knife icons'></i>
              <span class="text nav-text">Weapon</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="Echos-TD.html">
              <i class="bx bxs-virus icons"></i>
              <span class="text nav-text">Echos/TD</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="Story.html">
              <i class="bx bx-book-content icons"></i>
              <span class="text nav-text">Story</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="Timeline.html">
              <i class="bx bx-calendar icons"></i>
              <span class="text nav-text">Timeline</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="Gacha.html">
              <i class="bx bx-stats icons"></i>
              <span class="text nav-text">Gacha Simulator</span>
            </a>
          </li>
          </ul>
        </div>
        <div class="bottom-content">
          <li class="nav-link">
            <a href="Credits.html">
              <i class="bx bxs-heart icons"></i>
              <span class="text nav-text">Support Us</span>
            </a>
          </li>
        </div>
      </div>
    </nav>
    <main>
      <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<style>
body {
background-color: black;
color: white;
}

.main-container {
    max-width: 1200px;
    width: 100%;
    margin: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center; /* Center horizontally */
    justify-content: center; /* Center vertically */
    min-height: 100vh; /* Full height of viewport */
}


.weapons-grid {
    display: grid;
    grid-template-columns: repeat(4, minmax(150px, 1fr));
    gap: 15px;
    justify-content: center;
}

.weapon-item {
	width: 200px;
	height: 300px;
	border: 1px solid #ddd;
	border-radius: 10px;
	padding: 10px;
	text-align: center;
	transition: box-shadow 0.3s ease-in-out, border-radius 0.3s ease-in-out;
	position: relative;
	background: #202020;
}

.weapon-item:hover {
	box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
	border-radius: 15px;
	/* Smooth transition on hover */
}

.weapon-image-wrapper {
	position: relative;
	width: 100%;
	height: 200px;
	overflow: hidden;
	border-radius: 8px;
	/* Slight rounding for images */
}

.weapon-image-wrapper::before {
	content: "";
	position: absolute;
	inset: 0;
	border-radius: 8px;
	z-index: 0;
}

.weapon-image-wrapper img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	border-radius: 8px;
	z-index: 1;
	transform: scaleX(-1);
}

.weapon-tags {
	position: absolute;
	top: 10px;
	right: 10px;
	display: flex;
	flex-direction: column;
	align-items: flex-end;
}

.weapon-tags .weapon-label {
	position: relative;
	display: inline-block;
	padding: 5px 10px;
	margin: 2px;
	font-size: 12px;
	white-space: nowrap;
	border: 2px solid white;
	border-radius: 6px;
}

.weapon-tags .weapon-label::before {
	content: "";
	position: absolute;
	inset: 0;
	background: rgba(0, 0, 0, 0.3);
	border-radius: 6px;
	z-index: -1;
}

/* Weapon type icon */
.weapon-type-icon {
    width: 32px !important;  
    height: 32px !important;  
    object-fit: contain !important;
    display: inline-block;
    vertical-align: middle;
    white-space: nowrap;
    border: 2px solid white;
    border-radius: 6px;
    box-sizing: border-box;
}


.rarity-5 {
  background: radial-gradient(circle, #ffcc00, #ffb700, #ff9f00);
  color: white;
}

/* Gold for 5-star */
.rarity-4 {
  background: radial-gradient(circle, #a020f0, #800080, #4b0082);
  color: white;
}

/* Purple for 4-star */
.rarity-3 {
  background: radial-gradient(circle, #1E90FF, #0077CC, #0055AA);
  color: white;
}

/* Blue for 3-star */
.rarity-2 {
  background: radial-gradient(circle, #32CD32, #28A428, #1F7F1F);
  color: white;
}

/* Green for 2-star */
.rarity-1 {
  background: radial-gradient(circle, #808080, #666666, #4D4D4D);
  color: white;
}

/* Gray for 1-star */


/* Grey for 1-star */
.type {
	background-color: #2196F3;
	color: white;
}

/* Blue for weapon type */
.weapon-name {
	margin-top: 8px;
	font-size: 14px;
}

.weapon-stats {
	font-size: 14px;
	/* Default font size for stats */
	text-align: center;
}

.weapon-stats .stats-name {
	font-size: 12px;
	/* Smaller font for stats name */
	color: white;
	/* Lighter color for better distinction */
}

.weapon-stats .stats-value {
	font-size: 14px;
	/* Keep values readable */
	font-weight: bold;
}

.modal {
	display: none;
	position: fixed;
	z-index: 1000;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	background-color: rgba(0, 0, 0, 0.6);
	display: flex;
	align-items: center;
	justify-content: center;
}

.modal-content {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	/* Align everything to the left */
	padding: 20px;
	background: #202020;
	border-radius: 8px;
	width: 60%;
	max-width: 600px;
}

.modal-header {
	display: flex;
	align-items: flex-start;
	gap: 15px;
	/* Spacing between image and stats */
	margin-bottom: 10px;
}

.modal-header img {
	height: 300px;
	object-fit: contain;
	border-radius: 8px;
}

.modal-stats {
	display: flex;
	flex-direction: column;
}

.modal-stats .stats {
    text-align: center;
    align-self: center;
    width: 100%;
    font-size: 18px;
    font-weight: bold;
}

.modal-skill {
	margin-top: 15px;
}
.modal-skill #modal-skill-name{
  font-size: 18px;
  font-weight: bold;
}

.fir {
	position: relative;
	width: 100%;
	font-size: 0;
	border-radius: 5px;
	background: #202020;
}

.fir::after {
	content: '';
	position: absolute;
	top: 50%;
	left: 0;
	width: 100%;
	height: 0;
	border-top: 2px dashed #fff;
	z-index: 1;
	pointer-events: none;
}

.fir-range {
	width: 100%;
	height: 50px;
	opacity: 0;
	display: inline-block;
}

.fir-counter {
	position: absolute;
	top: 20px;
	/* Adjusts position above slider */
	left: -10px;
	width: 20px;
	/* Increase size for better visibility */
	height: 20px;
	/* Equal width & height to make it circular */
	font-size: 14px;
	/* Reduce font size to fit */
	color: #00a1ff;
	text-align: center;
	border: none;
	border-radius: 50%;
	/* Ensures a perfect circle */
	background: rgba(255, 255, 255, 0.9);
	box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
	/* Adds slight shadow */
	transform: translateX(calc(var(--position) * 1px));
	pointer-events: none;
	display: flex;
	/* Enables flexbox */
	justify-content: center;
	/* Centers text horizontally */
	align-items: center;
	font-weight: bold;
	z-index: 3;
}

.fir-line {
	position: absolute;
	top: 50%;
	left: 0;
	width: 100%;
	height: 0;
	border-top: 2px solid #00a1ff;
	z-index: 2;
	transform-origin: left top;
	transform: scaleX(var(--size));
	pointer-events: none;
	z-index: 2;
}

/* Multiplier Colors */
/*
.step1 { color: gray; font-weight: bold; } 
.step2 { color: green; font-weight: bold; }
.step3 { color: blue; font-weight: bold; } 
.step4 { color: purple; font-weight: bold; }
.step5 { color: orange; font-weight: bold; }
*/

/* Multiplier Colors Alternative*/

.step1 { color: gray; font-weight: bold; }
.step2 { color: greenyellow; font-weight: bold; }
.step3 { color: rgb(0, 174, 255); font-weight: bold; }
.step4 { color: rgb(194, 103, 255); font-weight: bold; }
.step5 { color: orange; font-weight: bold; }


/* Duration */
.duration-class { color: rgb(0, 174, 255); font-weight: bold; }
/* Stack */
.stack-class { color: rgb(255, 205, 112); font-weight: bold; }


.close-modal-button {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 50px;
    font-weight: bold;
    cursor: pointer;
    color: red;
    transition: transform 0.2s ease, color 0.2s ease;
}

.close-modal-button:hover {
    color: darkred;
    transform: scale(1.2) rotate(10deg);
}

.close-modal-button:active {
    transform: scale(0.9);
}

@keyframes pulseGlow {
    0% { text-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
    50% { text-shadow: 0 0 15px rgba(255, 0, 0, 0.8); }
    100% { text-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
}

.close-modal-button:hover {
    animation: pulseGlow 0.8s infinite alternate;
}

.filters {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 10px;
    width: 80%;
    margin: 0 auto; /* Center the container */
    align-items: center; /* Center horizontally */
    justify-content: center; /* Center vertically */
}

/* Search Bar - Full Width */
#search-bar {
  width: 80%;
  padding: 12px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background: #1e1e1e;
  color: #fff;
  outline: none;
}

#search-bar:focus {
    border-color: #007bff;
}

/* Dropdown Container */
.filter-options {
    display: flex;
    flex-direction: row;
    gap: 10px;
    justify-content: center;
    width: 80%;
}

/* Dropdowns */
.filters select {
    flex: 1;
    padding: 8px 12px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 4px;
    background-color: white;
    cursor: pointer;
    outline: none;
    transition: border-color 0.3s ease;
}

.filters select:focus {
    border-color: #007bff;
}

/* Responsive - Stack dropdowns on smaller screens */
@media (max-width: 600px) {
    .filter-options {
        flex-direction: column;
    }

    .filters select {
        width: 100%;
    }
}
/* Responsive Design */
@media (max-width: 1024px) { /* Tablets */
    .weapons-grid {
        grid-template-columns: repeat(3, minmax(150px, 1fr));
    }
}

@media (max-width: 768px) { /* Mobile */
    .weapons-grid {
        grid-template-columns: repeat(2, minmax(150px, 1fr));
    }
}

@media (max-width: 480px) { /* Small screens */
    .weapons-grid {
        grid-template-columns: repeat(1, minmax(150px, 1fr));
    }
}

</style>
<!-- ðŸŽ‰ Banner -->
<div class="banner">
  <hr class="separator">
  <h2 class="title">Weapon</h2>
  <hr class="separator">
</div>
<div class="filters">
    <input type="text" id="search-bar" placeholder="Search by name...">
    <div class="filter-options">
        <select id="filterRarity">
            <option value="">All Rarities</option>
            <option value="5">5&#9733</option>
            <option value="4">4&#9733</option>
            <option value="3">3&#9733</option>
        </select>
        <select id="filterType">
            <option value="">All Types</option>
        </select>
        <select id="filterSubstats">
            <option value="">All Substats</option>
        </select>
    </div>
</div>

<div class="main-container">
	<div class="weapons-grid">
	</div>
</div>
<div id="weapon-modal" class="modal" style="display: none;">
	<div class="modal-content">
		<span class="close-modal-button">&times;</span>
		<div class="modal-header">
			<img id="modal-image" src="" alt="">
			<div class="modal-stats">
				<h2 id="modal-title"></h2>
				<div id="weapon-stage-slider" class="fir">
					<label for="weapon-stage"><span id="stage-value">1</span></label>
					<input class="fir-range" type="range" id="weapon-stage" min="1" max="8" value="1">
				</div>
				<p class="stats"><span id="modal-main-stats"></span> | <span id="modal-sub-stats"></span></p>
        <br>
				<p id="modal-description"></p>
			</div>
		</div>
		<div class="modal-skill">
			<p>Skill: <span id="modal-skill-name"></span></p>
			<p id="modal-skill-description"></p>
		</div>
	</div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const weaponsGrid = document.querySelector(".weapons-grid");
    const modal = document.getElementById("weapon-modal");
    const modalTitle = document.getElementById("modal-title");
    const modalImage = document.getElementById("modal-image");
    const modalDescription = document.getElementById("modal-description");
    const modalSkillName = document.getElementById("modal-skill-name");
    const modalSkillDescription = document.getElementById("modal-skill-description");
    const modalMainStats = document.getElementById("modal-main-stats");
    const modalSubStats = document.getElementById("modal-sub-stats");
    const stageSlider = document.querySelector(".fir-range");
    const stageValue = document.getElementById("stage-value");
	const closeModal = document.querySelector(".close-modal-button");
    const searchBar = document.getElementById("search-bar");
    const filterRarity = document.getElementById("filterRarity");
    const filterType = document.getElementById("filterType");
    const filterSubstats = document.getElementById("filterSubstats");

    let weapons = [];

    fetch("https://raw.githubusercontent.com/GachaDB/wuthering-wave-db/main/Asset/Json/weapon.json")
        .then(response => response.json())
        .then(data => {
            weapons = data.weapons;

            // Extract unique types and substats
            const weaponTypes = [...new Set(weapons.map(w => w.type))];
            const substats = [...new Set(weapons.map(w => w.sub_stats.stats))];

            // Populate weapon types dropdown
            weaponTypes.forEach(type => {
                const option = document.createElement("option");
                option.value = type;
                option.textContent = type;
                filterType.appendChild(option);
            });

            // Populate substats dropdown
            substats.forEach(stat => {
                const option = document.createElement("option");
                option.value = stat;
                option.textContent = stat;
                filterSubstats.appendChild(option);
            });

            displayWeapons(weapons);
        })
        .catch(error => console.error("Error fetching weapons:", error));

    function displayWeapons(weaponsList) {
        weaponsGrid.innerHTML = "";

        weaponsList.forEach(weapon => {
            const weaponItem = document.createElement("div");
            weaponItem.classList.add("weapon-item");

            const mainStatsValues = weapon.main_stats.value.split("/").map(parseFloat);
            const subStatsValues = weapon.sub_stats.value.split("/").map(parseFloat);
            const encodedImage = weapon.image.replace(/#/g, "%23");

            weaponItem.innerHTML = `
                <div class="weapon-image-wrapper rarity-${weapon.rarity}">
                    <img src="https://raw.githubusercontent.com/GachaDB/Wuthering-Waves-Assets/refs/heads/main/weapon/${encodedImage}" alt="${weapon.name}">
                </div>
                <div class="weapon-tags">
                    <span class="weapon-label rarity-${weapon.rarity}">${weapon.rarity}&#9733;</span>
                    <img class="weapon-type-icon" src="https://raw.githubusercontent.com/GachaDB/Wuthering-Waves-Assets/refs/heads/main/weapon/${weapon.type}_Weapon_Icon.webp" alt="${weapon.type}" title="${weapon.type}">
                </div>
                <div class="weapon-name"><strong>${weapon.name}</strong></div>
                <div class="weapon-stats">
                    <span class="stats-name">${weapon.main_stats.stats} | ${weapon.sub_stats.stats}</span>
                </div>
                <div class="weapon-stats">
                    <span class="stats-value">${mainStatsValues[7]} | ${subStatsValues[7]}%</span>
                </div>
            `;
			
			weaponItem.addEventListener("click", () => {
                currentWeapon = weapon;
                stageSlider.value = 1;
                updateWeaponStats(1);
                const stars = "&#9733;".repeat(weapon.rarity);

                modalTitle.innerHTML = `${weapon.name} ${stars}`;
                modalImage.src = `https://raw.githubusercontent.com/GachaDB/Wuthering-Waves-Assets/refs/heads/main/weapon/${encodedImage}`;
                modalImage.classList.forEach(className => {
                    if (className.startsWith("rarity-")) {
                        modalImage.classList.remove(className);
                    }
                });
                modalImage.classList.add(`rarity-${currentWeapon.rarity}`);
                modalDescription.textContent = weapon.description || "No description available.";
                modalSkillName.textContent = weapon.skill ? weapon.skill.name : "Unknown Skill";
                modalSkillDescription.innerHTML = weapon.skill ? highlightMultipliers(weapon.skill.description) : "No skill description.";
                modal.style.display = "flex";
                openModal(document.getElementById("weapon-stage-slider"));
            });


            weaponsGrid.appendChild(weaponItem);
        });
    }

    closeModal.addEventListener("click", () => {
		modal.style.display = "none";
	});
	modal.addEventListener("click", (e) => {
		if(e.target === modal) {
			modal.style.display = "none";
		}
	});
	stageSlider.addEventListener("input", function() {
		if(currentWeapon) {
			updateWeaponStats(parseInt(stageSlider.value));
		}
	});

    function filterWeapons() {
        const searchValue = searchBar.value.toLowerCase();
        const selectedRarity = filterRarity.value;
        const selectedType = filterType.value;
        const selectedSubstats = filterSubstats.value;

        const filteredWeapons = weapons.filter(weapon => {
            const matchesName = weapon.name.toLowerCase().includes(searchValue);
            const matchesRarity = selectedRarity ? weapon.rarity == selectedRarity : true;
            const matchesType = selectedType ? weapon.type === selectedType : true;
            const matchesSubstats = selectedSubstats ? weapon.sub_stats.stats === selectedSubstats : true;

            return matchesName && matchesRarity && matchesType && matchesSubstats;
        });

        displayWeapons(filteredWeapons);
    }
    function highlightMultipliers(text) {
        const combinedRegex = /((?:\d+\s*\/\s*){4}\d+\s*time)|(\b\d+\b(?=(?:\s*\/\s*\d+)*\s*s)|\b\d+(?=\s*s))|(\b\d+(\.\d+)?%?(?:\s*\/\s*\d+(\.\d+)?%?)*)/g;
        const colors = ['step1', 'step2', 'step3', 'step4', 'step5'];

        return text.replace(combinedRegex, (match, stack, duration, multiplier) => {
            if (stack) {
                return `stacking up to ` + stack.replace(/\d+/g, num => `<span class="stack-class">${num}</span>`);
            } else if (duration) {
                return `<span class="duration-class">${duration}</span>`;
            } else if (multiplier) {
                const parts = multiplier.match(/\d+(\.\d+)?%?/g) || [];
                const coloredParts = parts.map((num, i) => `<span class="${colors[i % colors.length]}">${num}</span>`);
                return multiplier.replace(/\d+(\.\d+)?%?/g, () => coloredParts.shift());
            }
            return match;
        });
    }
    function updateWeaponStats(stage) {
		if(!currentWeapon) return;
		const levels = [1, 20, 40, 50, 60, 70, 80, 90];
		const mainStatsValues = currentWeapon.main_stats.value.split('/').map(parseFloat);
		const subStatsValues = currentWeapon.sub_stats.value.split('/').map(parseFloat);
		const mainStat = mainStatsValues[stage - 1] || mainStatsValues[mainStatsValues.length - 1];
		const subStat = subStatsValues[stage - 1] || subStatsValues[subStatsValues.length - 1];
		const currentLevel = levels[stage - 1] || levels[levels.length - 1];
		stageValue.textContent = `Level ${currentLevel}`;
		modalMainStats.textContent = `${currentWeapon.main_stats.stats}: ${mainStat}`;
		modalSubStats.textContent = `${currentWeapon.sub_stats.stats}: ${subStat}%`;
	}

    // Event listeners for filtering
    searchBar.addEventListener("input", filterWeapons);
    filterRarity.addEventListener("change", filterWeapons);
    filterType.addEventListener("change", filterWeapons);
    filterSubstats.addEventListener("change", filterWeapons);
});

class App {
	constructor($fir) {
		this.dom = {
			$fir: $fir,
			$range: $fir.querySelector('.fir-range'),
			$counter: document.createElement('div'),
			$line: document.createElement('div')
		};
		// Custom level mapping
		this.levels = [1, 20, 40, 50, 60, 70, 80, 90];
		this.rangeWidth = this.dom.$range.offsetWidth;
		// Prevent duplicate elements
		if(!document.querySelector('.fir-counter')) {
			this.dom.$fir.appendChild(this.dom.$counter);
		}
		if(!document.querySelector('.fir-line')) {
			this.dom.$fir.appendChild(this.dom.$line);
		}
		// Store animation interval
		this.animationInterval = null;
		// Initialize slider
		this.init();
	}
	init() {
		this.initRange();
		this.initCounter();
		this.initLine();
		this.initAnimate();
	}
	initRange() {
		this.textSuperPosition = 0; // Ensure slider starts at index 0
		this.dom.$range.value = 1; // Always start at 1 (index 0)
		this.changeVals();
		this.dom.$range.addEventListener('input', () => {
			this.changeVals();
			updateWeaponStats(this.levels[this.amount - 1]); // Sync with weapon stats
		});
	}
	initCounter() {
		this.dom.$counter.classList.add('fir-counter');
		this.changeCounter();
	}
	initLine() {
		this.dom.$line.classList.add('fir-line');
		this.changeCounter();
	}
	initAnimate() {
		// Prevent multiple intervals
		if(this.animationInterval) {
			clearInterval(this.animationInterval);
		}
		this.animationInterval = setInterval(() => {
			requestAnimationFrame(this.changeCounter.bind(this));
		}, 1000 / 60);
	}
	changeVals() {
		this.amount = Math.floor(this.dom.$range.value);
		this.range = (this.amount - 1) / (this.levels.length - 1);
	}
	changeCounter() {
		this.textSuperPosition = this.lerp(this.textSuperPosition, this.amount, 0.1);
		let newPosition = this.lerp(parseFloat(this.dom.$counter.style.getPropertyValue('--position')) || 0, this.rangeWidth * this.range, 0.1);
		let newSize = this.lerp(parseFloat(this.dom.$line.style.getPropertyValue('--size')) || 0, this.range, 0.1);
		let index = Math.round(this.textSuperPosition) - 1;
		index = Math.max(0, Math.min(this.levels.length - 1, index)); // Ensure valid index
		let displayValue = this.levels[index];
		this.dom.$counter.textContent = displayValue;
		// **Force CSS to reapply styles**
		this.dom.$counter.style.removeProperty('--position'); // Reset first
		this.dom.$counter.style.setProperty('--position', newPosition);
		this.dom.$line.style.removeProperty('--size'); // Reset first
		this.dom.$line.style.setProperty('--size', newSize);
	}
	lerp(start, end, amt) {
		return (1 - amt) * start + amt * end;
	}
	// Reset slider and line when opening modal
	resetSlider() {
		this.dom.$range.value = 1; // Reset slider to index 0
		this.textSuperPosition = 0;
		this.changeVals();
		this.changeCounter();
		// Reset the line size
		this.dom.$line.style.setProperty('--size', 0);
		// Restart animation safely
		this.initAnimate();
	}
}
// Global instance (Only one slider)
let globalSlider;
// Function to open modal and reset slider
function openModal($fir) {
	if(!globalSlider) {
		globalSlider = new App($fir); // Create only once
	}
	globalSlider.resetSlider(); // Reset slider each time modal opens
}
</script>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="../JS/Sidebar.js"></script>
  </body>
</html>